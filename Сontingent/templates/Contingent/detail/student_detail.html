{% extends 'base_detail.html' %}

{% load util %}

{% block detail-header %}
<h1>
    Студент {{ object.full_name }}
</h1>
{% endblock %}

{% block buttons %}
    {{ block.super }}
    
    {% if not student.record_book %}
        <a class="btn-primary" href="{% url 'generate_record_book' pk=object.pk %}">Сгенерировать зачётку</a>
    {% else %}
        <a class="btn-primary" href="{% url 'view_record_book' qualification_id=student.group.qualification.pk admission_year=object.group.year_create student_id=object.pk%}">Просмотреть зачетку</a>
    {% endif %}

    {% if student.is_in_academ %}
        <!-- Кнопка "Вернуть из академа" с формой подтверждения -->
        <form method="post" action="{% url 'academ_return' pk=object.pk %}" onsubmit="return confirm('Вы уверены, что хотите вернуть студента из академического отпуска?');">
            {% csrf_token %}
            <button type="submit" class="btn-primary">Вернуть из академа</button>
        </form>
    {% else %}
        <!-- Кнопка "Отправить в академ" -->
        <a class="btn-primary" href="{% url 'academ_leave' pk=object.pk %}">
            Отправить в академ
        </a>
    {% endif %}

    {% if student.is_expelled %}
        <a class="btn-primary" role="button" href="{% url 'student_recover' pk=object.pk %}" style="background-color: #10b981">
        Восстановить
        </a>
    {% else %}
        <a class="btn-primary" role="button" href="{% url 'expel_student' pk=object.pk %}" style="background-color: #dc3545" >
        Отчислить
        </a>
    {% endif %}
{% endblock %}
