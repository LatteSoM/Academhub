{% extends 'base.html' %}
{% load static widget_tweaks %}

{% block content %}
<div class="container-fluid mt-4">
  <h1 class="text-white mb-4">Редактирование учебного плана</h1>

  <form method="post" novalidate>
    {% csrf_token %}
    <table class="data-table table">
      <thead>
        <tr>
          <th width="50%">Дисциплина</th>
          <th width="20%">Код дисциплины</th>
          <th width="30%">Ошибки</th>
        </tr>
      </thead>
      <tbody>
        {% for field in editable_form %}
          {% if field.name|slice:"0:14" == "discipline_id_" %}
            {{ field.as_hidden }}
          {% elif field.name|slice:"0:16" == "discipline_name_" %}
            <tr>
              <td class="{% if field.field.warnings %}has-warning{% endif %}">
                {% render_field field class="form-control custom-input" %}
              </td>
          {% elif field.name|slice:"0:16" == "discipline_code_" %}
              <td class="{% if field.field.warnings %}has-warning{% endif %}">
                {% render_field field class="form-control custom-input" %}
              </td>
              <td class="{% if field.field.warnings %}has-warning{% endif %}">
                {% if field.field.warnings %}
                  <div class="warning-text">
                    {{ field.field.warning_description|join:", " }}
                  </div>
                {% endif %}
              </td>
            </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>

    <div style="text-align: center; margin-top: 20px; margin-bottom: 20px;">
      <button type="submit" class="btn btn-primary btn-lg" style="width: 30%;">Сохранить</button>
    </div>
  </form>
</div>

<style>
body {
  background-color: #1e2a38;
}

.data-table {
  background-color: #374151; /* Цвет фона таблицы */
  border-radius: 8px; /* Закругления углов */
  overflow: hidden; /* Обрезка для закруглений */
  width: 100%; /* Ширина таблицы */
}

.data-table th {
  background-color: #4b5563; /* Цвет заголовка */
  padding: 12px;
  font-weight: 600;
  color: #ffffff; /* Цвет текста заголовков */
  text-align: left; /* Выравнивание текста в заголовках */
}

.data-table td {
  border-top: 1px solid #2c3e50; /* Цвет разделительной линии */
  padding: 8px;
  vertical-align: middle;
  background-color: #374151; /* Цвет фона ячеек */
  color: #ecf0f1; /* Цвет текста ячеек */
}

.custom-input {
  background-color: #4b5563; /* Цвет полей ввода */
  border: 1px solid #6b7280; /* Цвет границы полей ввода */
  border-radius: 4px;
  padding: 8px 12px;
  width: 100%;
  font-size: 14px;
  color: #ecf0f1; /* Цвет текста полей ввода */
}

.custom-input:focus {
  background-color: #6b7280; /* Цвет фона при фокусе */
  border-color: #60a5fa; /* Цвет границы при фокусе */
  box-shadow: 0 0 0 0.2rem rgba(60, 165, 250, 0.25);
  outline: none;
}

.has-warning {
  background-color: #fbbf24 !important; /* Цвет фона для полей с ошибками */
}

.has-warning .custom-input {
  background-color: #fde68a; /* Цвет фона для предупреждений */
  border-color: #fbbf24; /* Цвет границы для предупреждений */
  color: #1e2a38; /* Цвет текста для предупреждений */
}

.warning-text {
  color: #1e2a38; /* Цвет текста предупреждений */
  font-size: 13px;
  margin: 0;
}

.btn-primary {
  background-color: #3b82f6; /* Цвет кнопки сохранить */
  border-color: #3b82f6; /* Цвет границы кнопки */
  padding: 1rem 2rem; /* Увеличенные отступы для кнопки */
  font-size: 1.25rem; /* Увеличенный размер шрифта */
}

.btn-primary:hover {
  background-color: #2563eb; /* Цвет кнопки при наведении */
  border-color: #2563eb; /* Цвет границы кнопки при наведении */
}

/* Стилизация placeholder */
.custom-input::placeholder {
  color: #9ca3af; /* Цвет текста плейсхолдера */
}

/* Стилизация скроллбара */
::-webkit-scrollbar {
  width: 10px;
  background-color: #374151; /* Цвет фона скроллбара */
}

::-webkit-scrollbar-thumb {
  background-color: #4b5563; /* Цвет скроллбара */
  border-radius: 5px; /* Закругление скроллбара */
}

::-webkit-scrollbar-thumb:hover {
  background-color: #6b7280; /* Цвет скроллбара при наведении */
}
</style>
{% endblock %}
